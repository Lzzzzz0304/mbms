# 接口文档

**Base URL：**

```
http://localhost:9093
```

## 1.用户管理模块

该接口用于获取用户列表，并返回指定页数的用户数据和总用户数。

### （1）获取用户列表（分页查询）

- **URL**

  ```
  POST /api/v1/user/query
  ```

- **请求体**

  ```json
  {
    "id": 1,
    "account": "user123",
    "name": "John Doe",
    "phone": "1234567890",
    "email": "john.doe@example.com",
    "sex": 1,
    "age": 30
    // 其他用户对象的具体字段
  }
  
  ```

- **请求参数**

  | 参数名    | 类型 | 默认值 | 描述                        |
  | --------- | ---- | ------ | --------------------------- |
  | startPage | int  | 1      | 起始页数，默认为1           |
  | pageSize  | int  | 8      | 每页显示的用户数量，默认为8 |

- **成功响应**

  - 状态码：200 ok

  - 返回内容

    ```json
    {
        "total": 101,
        "users": [
            {
                "id": 1,
                "account": "Lz200304",
                "password": "Zty200304",
                "email": "2944406490@qq.com",
                "phone": "15166636260",
                "question": "你爱人的姓名？",
                "answer": null,
                "role": 2,
                "age": 21,
                "sex": 1,
                "createTime": "2024-06-24T12:58:50.000+00:00",
                "updateTime": "2024-06-26T01:31:01.000+00:00",
                "del": 0,
                "name": "佑哥"
            },
            {
                "id": 2,
                "account": "Lh11111",
                "password": "Lh11111",
                "email": "2425443267@qq.com",
                "phone": "15563566207",
                "question": "你的名字叫什么？",
                "answer": null,
                "role": 2,
                "age": 21,
                "sex": 1,
                "createTime": "2024-06-25T06:50:48.000+00:00",
                "updateTime": "2024-06-25T06:50:48.000+00:00",
                "del": 0,
                "name": "李浩"
            },
           ...
        ]
    }
    ```

- **错误响应**：错误详情

### （2）查询用户

该接口用于根据指定的查询条件获取用户列表，并返回符合条件的用户数据和总用户数。

- **URl**

  ```
  GET /api/v1/user/query
  ```

- **请求参数**

  | 参数名    | 类型    | 是否必填 | 默认值 | 描述                         |
  | --------- | ------- | -------- | ------ | ---------------------------- |
  | id        | Integer | 否       | 无     | 用户ID                       |
  | account   | String  | 否       | 无     | 用户账号                     |
  | name      | String  | 否       | 无     | 用户姓名                     |
  | phone     | String  | 否       | 无     | 用户电话                     |
  | email     | String  | 否       | 无     | 用户邮箱                     |
  | sex       | Integer | 否       | 无     | 用户性别（0: 女, 1: 男）     |
  | age       | Integer | 否       | 无     | 用户年龄                     |
  | startPage | int     | 否       | 1      | 起始页数，默认为1            |
  | pageSize  | int     | 否       | 8      | 每页显示的用户数量，默认为10 |

- **成功响应**

  - **状态码**:200 OK

  - **返回内容**

    ```json
    {
        "total": 2,
        "users": [
            {
                "id": 1,
                "account": "Lz200304",
                "password": "Zty200304",
                "email": "2944406490@qq.com",
                "phone": "15166636260",
                "question": "你爱人的姓名？",
                "answer": null,
                "role": 2,
                "age": 21,
                "sex": 1,
                "createTime": "2024-06-24T12:58:50.000+00:00",
                "updateTime": "2024-06-26T01:31:01.000+00:00",
                "del": 0,
                "name": "佑哥"
            },
            {
                "id": 2,
                "account": "Lh11111",
                "password": "Lh11111",
                "email": "2425443267@qq.com",
                "phone": "15563566207",
                "question": "你的名字叫什么？",
                "answer": null,
                "role": 2,
                "age": 21,
                "sex": 1,
                "createTime": "2024-06-25T06:50:48.000+00:00",
                "updateTime": "2024-06-25T06:50:48.000+00:00",
                "del": 0,
                "name": "李浩"
            }
        ]
    }
    ```

- **错误响应**

### （3）更新用户信息

- **URL**

  ```
  PATCH /api/v1/user/update
  ```

- **请求参数**

  - **请求体**

    ```json
    {
      "id": 1,
      "account": "user123",
      "name": "John Doe",
      "phone": "1234567890",
      "email": "john.doe@example.com",
      "sex": 1,
      "age": 30
      // 其他用户对象的具体字段，接收null，但存在的参数名要与数据库对应。
    }
    ```

- 成功响应
  - **状态码**：200 ok
  
- 错误响应：待定

### （4）删除用户

- **URL**

  ```
  DELETE /api/v1/user/{id}
  ```

- **请求参数**

  | 参数名 | 类型    | 是否必填 | 描述   |
  | ------ | ------- | -------- | ------ |
  | id     | Integer | 是       | 用户ID |

- **请求示例**

  ![image-20240628201604890](C:\Users\29444\AppData\Roaming\Typora\typora-user-images\image-20240628201604890.png)

- **成功响应**

  - **状态码**：200 ok

  - **返回内容**：

    ```json
    {
      "status": "success",
      "message": "User deleted successfully"
    }
    
    ```

- **错误响应**

### （5）用户登录

根据用户名密码进行用户登录

- **URL**

  ```
  GET /api/v1/user/login
  ```

- **请求参数**

  | 参数名   | 类型   | 是否必填 | 描述     |
  | -------- | ------ | -------- | -------- |
  | account  | String | 是       | 用户账号 |
  | password | String | 是       | 用户密码 |

- **成功响应**

  - 状态码：200 ok

  - 返回内容：

    ```json
    {
        "message": "登录成功",
        "user": {
            "id": 5,
            "account": "帅气",
            "password": "hgfhfd",
            "email": "2641154@qq.com",
            "phone": "215154651211",
            "question": "h",
            "answer": null,
            "role": 2,
            "age": 19,
            "sex": 0,
            "createTime": "2024-06-26T02:14:51.000+00:00",
            "updateTime": "2024-06-26T02:14:51.000+00:00",
            "del": 0,
            "name": "大家带"
        },
        "status": "success"
    }
    ```

- 错误响应

  - 用户不存在

    - 状态码：404 Not Found

    - 返回内容：

      ```json
      {
        "status": "error",
        "message": "用户不存在"
      }
      ```

  - 密码不正确

    - 状态码：401 Unauthorized

    - 返回内容

      ```json
      {
        "status": "error",
        "message": "密码不正确"
      }
      
      ```

### （6）用户注册

- URL

  ```json
  POST /api/v1/user/register
  ```

- 请求体

  ```json
  {
    "account": "newuser",
    "password": "password123",
    "phone": "1234567890",
    "email": "newuser@example.com",
    "question": "你是谁",
    "answer":"不知道"
  }
  ```

- 成功响应

  - 状态码：201 Created

  - 返回内容

    ```json
    {
      "status": "success",
      "message": "注册成功"
    }
    ```

- 错误响应

  - 用户已存在

    - 状态码：409 Conflict

    - 返回内容

      ```json
      {
        "status": "error",
        "message": "用户已存在"
      }
      
      ```

  - 邮箱已注册

    - 状态码：409 Conflict

    - 返回内容

      ```json
      {
        "status": "error",
        "message": "邮箱已注册"
      }
      ```

### （7）忘记密码（输入账号）

- **URL**

  ```
  GET /api/v1/user/forgetPassword
  ```

- **请求参数**

  | 参数名  | 类型   | 是否必填 | 描述     |
  | ------- | ------ | -------- | -------- |
  | account | String | 是       | 用户账号 |

- **成功响应**

  - **状态码:** 200 OK

  - **返回内容:**

    ```json
    {
      "status": "success",
      "message": "用户存在",
      "account": "user123"
    }
    ```

- **错误响应**

  - 用户不存在

    - **状态码:** 404 Not Found

    - **返回内容:**

      ```json
      {
        "status": "error",
        "message": "用户不存在"
      }
      ```

### （8）忘记密码（输入答案）

- **URL**

  ```
  GET /api/v1/user/resetPassword
  ```

- **请求参数**

  | 参数名   | 类型   | 是否必填 | 描述         |
  | -------- | ------ | -------- | ------------ |
  | account  | String | 是       | 用户账号     |
  | asw      | String | 是       | 安全问题答案 |
  | password | String | 是       | 新密码       |

- **成功响应**

  - **状态码:** 200 OK

  - **返回内容:**

    ```json
    {
      "status": "success",
      "message": "密码修改成功"
    }
    ```

- **错误响应**

  - 答案错误

    - **状态码:** 401 Unauthorized

    - **返回内容:**

      ```json
      {
        "status": "error",
        "message": "答案错误"
      }
      ```



### （9）获取个人资料

- URL

  ```
  GET /api/v1/user/personalData
  ```

- 请求参数

  | 参数名  | 类型   | 是否必填 | 描述     |
  | ------- | ------ | -------- | -------- |
  | account | String | 是       | 用户账号 |

- **成功响应**

  - **状态码:** 200 OK

  - **返回内容:**

    ```json
    {
      "status": "success",
      "data": {
        "id": 1,
        "account": "user123",
        "email": "user123@example.com",
        "phone": "1234567890",
        "question": "Your question?",
        "asw": "Your answer",
        "role": 1,
        "age": 25,
        "sex": 1,
        "createTime": "2023-01-01T12:00:00",
        "updateTime": "2023-01-01T12:00:00",
        "del": 0,
        "name": "John Doe"
      }
    }
    ```

### （10）更新密码

- URL

  ```
  GET /api/v1/user/updatePassword
  ```

- **请求参数**

  | 参数名      | 类型   | 是否必填 | 描述     |
  | ----------- | ------ | -------- | -------- |
  | account     | String | 是       | 用户账号 |
  | newPassword | String | 是       | 新密码   |

- **成功响应**
  - **状态码:** 200 OK
  - **返回内容:** 无内容

## 2.商品管理模块

## 3.商品类型模块

## 4.订单模块

<!--stackedit_data:
eyJoaXN0b3J5IjpbMjcxODMzMTEzXX0=
-->